<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Supertux-devel] Performance on XP
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/supertux-devel/2006-December/index.html" >
   <LINK REL="made" HREF="mailto:supertux-devel%40lists.berlios.de?Subject=Re%3A%20%5BSupertux-devel%5D%20Performance%20on%20XP&In-Reply-To=%3C826ffc730612290522q1ed2f6eeo2876b98610a4d17%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000625.html">
   <LINK REL="Next"  HREF="000628.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Supertux-devel] Performance on XP</H1>
    <B>djwings at gmail.com</B> 
    <A HREF="mailto:supertux-devel%40lists.berlios.de?Subject=Re%3A%20%5BSupertux-devel%5D%20Performance%20on%20XP&In-Reply-To=%3C826ffc730612290522q1ed2f6eeo2876b98610a4d17%40mail.gmail.com%3E"
       TITLE="[Supertux-devel] Performance on XP">djwings at gmail.com
       </A><BR>
    <I>Fri Dec 29 14:22:39 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000625.html">[Supertux-devel] Performance on XP
</A></li>
        <LI>Next message: <A HREF="000628.html">[Supertux-devel] Performance on XP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#626">[ date ]</a>
              <a href="thread.html#626">[ thread ]</a>
              <a href="subject.html#626">[ subject ]</a>
              <a href="author.html#626">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hardware accel off?
Here's a suggestion: Try recompiling it with the supertux-nogl patch, and
tell us what happens. My test machine, with an Athlon XP 1.4GHz and NVidia
GeForce 5200FX runs fine on Windows, even though I occasionally get those
jerky frames that you described. On Linux (Xubuntu) and the same machine, it
works great.

On 12/28/06, Allen King &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/supertux-devel">allen at a-king.us</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>  I've been doing a bunch of work, checking out the various suggestions:
</I>&gt;<i>
</I>&gt;<i> ===== 1. Odin Omdal H&#248;rthe wrote:
</I>&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i> This is a problem in the code as far as I have understood. Morten
</I>&gt;<i> Hustveit wrote a patch fixing it - but I don't think it got into the
</I>&gt;<i> code-base before 0.3.0. His 4 core Xeon with an X1800 ATI-card got
</I>&gt;<i> truly horrible performance (due to the sleeping in-game). It looks as
</I>&gt;<i> if the better machine you got - the worse the performance gets
</I>&gt;<i> (because sleeping is extremely little precise, and a fast machine has
</I>&gt;<i> to do many, many sleeps in order to get a 60fps framerate instead of
</I>&gt;<i> 3000 (as Morten's machine got)).
</I>&gt;<i>
</I>&gt;<i> The patch also fixes some poor jumping-behaviour - and I really find
</I>&gt;<i> the game more enjoyable after applying it. The patch and email never
</I>&gt;<i> made it to the list. However, it should reside at
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.ping.uio.no/~mortehu/jump-and-busy-frameloop.patch">http://www.ping.uio.no/~mortehu/jump-and-busy-frameloop.patch</A> &lt;<A HREF="http://www.ping.uio.no/%7Emortehu/jump-and-busy-frameloop.patch">http://www.ping.uio.no/%7Emortehu/jump-and-busy-frameloop.patch</A>&gt;
</I>&gt;<i>
</I>&gt;<i> Since you suffer the same problem, I will paste Morten's email below:
</I>&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  I had great hopes for this patch, but found that something else is
</I>&gt;<i> causing the slow frame rate, and the patch doesn't help that at all.  The
</I>&gt;<i> patch does help if one HAD to live with slow frame rates:  a) The velocities
</I>&gt;<i> are more like those of 0.1.3 (although horribly jerkey at 2.5fps).  b) It
</I>&gt;<i> also seems to drop fewer keys.   (But I can't live with slow frame rates !^)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ===== 2. Armin Eulenstein wrote:
</I>&gt;<i>
</I>&gt;<i> I got 0.3.0 running under Windows XP with SP2 very smooth at 60fps. I'm
</I>&gt;<i> using an Athlon XP 2200+; a old Geforce 2 MX400 Graphics card and got
</I>&gt;<i> 1024mb RAM.
</I>&gt;<i>
</I>&gt;<i>  Seemingly similar configurations.  I'm running XP Pro, and a different
</I>&gt;<i> graphics card, but...
</I>&gt;<i>
</I>&gt;<i> I thought for a minute that running SuperTux in a guest VMWare virtual
</I>&gt;<i> machine might be causing the problem, so I installed it in the main (host)
</I>&gt;<i> machine.  Then just to be sure, I uninstalled VMWare and rebooted.  All
</I>&gt;<i> results were the same -- 0.3.0 ran at 2.5fps!
</I>&gt;<i>
</I>&gt;<i>  SuperTux creates logfiles at the point where you start the
</I>&gt;<i> game, possibly you can find your problem at there.
</I>&gt;<i>
</I>&gt;<i>  On some runs, I get the message in stderr.txt: &quot;Restarting audio source
</I>&gt;<i> because of buffer underrun&quot;.  Other runs are clean.  Nothing ups the frame
</I>&gt;<i> rate, even if I turn off sounds and music in the config file.
</I>&gt;<i>
</I>&gt;<i> ===== 3. Wolfgang Becker wrote:
</I>&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i> Maybe a 64 bit problem? Supertux runs fine on my 950 MHz Athlon with
</I>&gt;<i> Geforce 3, even if I'm running XP. On my parents' laptop (P4, with
</I>&gt;<i> some ATI mobile, much faster than my box), it works, too but only
</I>&gt;<i> in windowed mode. Fullscreen flickers really bad which makes it
</I>&gt;<i> unplayable.
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I installed Supertux-0.3.0-win32-setup.exe on an older 32-bit 800MHz
</I>&gt;<i> Pentium III laptop running XP Pro SP2, with very similar results:
</I>&gt;<i>
</I>&gt;<i>                                    Tower                 Laptop. A XXX
</I>&gt;<i> 0.3.0:                         2.5fps                  1.2fps!  Abysmal.
</I>&gt;<i> 0.1.3 w OpenGL:      ~10fps                 ~7fps
</I>&gt;<i> 0.1.3 no OpenGL:     &gt;30fps                 &gt;30fps
</I>&gt;<i>
</I>&gt;<i> (The tower is the machine I've been reporting on up to now.)  0.1.3 seems
</I>&gt;<i> to slow way down using OpenGL. 0.3.0 seems 4-6x slower than 0.1.3.
</I>&gt;<i> (Rates are approximate using a stop watch on 50 frames, since the fps meter
</I>&gt;<i> didn't seem to work.)
</I>&gt;<i>
</I>&gt;<i> So it's looking like an OpenGL issue.  Which brings me to:
</I>&gt;<i>
</I>&gt;<i> ===== 4. The Digital Pioneer wrote:
</I>&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i> But seriously... I'll be trying 0.3.0 on windoze soon. I'll be downloading
</I>&gt;<i> it presently, so I'll have more results soon. About all I can recommend is
</I>&gt;<i> checking that your OGL is working properly (I don't see why it wouldn't be)
</I>&gt;<i> and that nothing else is getting in Supertux's way.
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i> So I downloaded the latest driver from nVIDIA, which proports to have
</I>&gt;<i> &quot;Microsoft(r) DirectX(r) 9.0c and OpenGL(r) 2.0 support&quot;, from
</I>&gt;<i> <A HREF="http://www.nvidia.com/object/winxp_2k_93.71.html">http://www.nvidia.com/object/winxp_2k_93.71.html</A> .  Still 2.5fps :-(
</I>&gt;<i>
</I>&gt;<i> I'm presuming SuperTux is happy with OpenGL(r) 2.0 support, but can't tell
</I>&gt;<i> because supertux.berlios.de is down.
</I>&gt;<i>
</I>&gt;<i> To figure out how to tune OpenGL, I googled opengl tuning and got an
</I>&gt;<i> ati.amd.com/developer/gdc/Performance*Tuning*.pdf.   It suggested varying
</I>&gt;<i> the frame buffer, and seeing its affect on fps, and I found that performance
</I>&gt;<i> is frame buffer limited -- it renders about 1.5M Pixels Per Second (pps),
</I>&gt;<i> actually it varies a little, 1.4-1.9 M pps:
</I>&gt;<i>
</I>&gt;<i> 800x600 -- 4fps            480,000      1.92M pps
</I>&gt;<i> 400x300 -- 12.3fps       120,000      1.48M pps
</I>&gt;<i> 300x225 -- 20fps            67,500      1.35M pps
</I>&gt;<i>
</I>&gt;<i> ===== 5. I'm guessin hardware acceleration is turned off, or something.
</I>&gt;<i> Although display properties show hardware acceleration at full.  Now I'm not
</I>&gt;<i> sure where to go from here.  Suggestions.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Supertux-devel mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/supertux-devel">Supertux-devel at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/supertux-devel">https://lists.berlios.de/mailman/listinfo/supertux-devel</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/supertux-devel/attachments/20061229/48ff8a88/attachment.html">https://lists.berlios.de/pipermail/supertux-devel/attachments/20061229/48ff8a88/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000625.html">[Supertux-devel] Performance on XP
</A></li>
	<LI>Next message: <A HREF="000628.html">[Supertux-devel] Performance on XP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#626">[ date ]</a>
              <a href="thread.html#626">[ thread ]</a>
              <a href="subject.html#626">[ subject ]</a>
              <a href="author.html#626">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/supertux-devel">More information about the Supertux-devel
mailing list</a><br>
</body></html>
